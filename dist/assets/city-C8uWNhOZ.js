import{y as ie,z as ce,A as Je,a as Q,B as Ze,i,C as J,D as X,E as Ie,G as de,H as F,I as ae,J as re,K as le,L as ye,M as Ge,N as Qe,O as et,P as tt,Q as Pe,h as q,R as Be,S as nt,T as j,U as Te,V as ge,W as at,X as lt,v as ke,Y as ne,Z as Me,$ as _e,a0 as Ve,a1 as ot,a2 as oe,a3 as $e,k as it,a4 as ct,a5 as rt,a6 as st,a7 as ut,a8 as dt,a9 as ft,aa as gt,ab as xe,ac as Ce,ad as ht,ae as mt,af as Ae,ag as vt,s as bt,g as yt,o as p,c as Y,b as fe,w as ue,F as Z,r as ee,u as Ee,ah as kt,ai as me,aj as _t,t as xt,ak as Ct,p as It,f as St,_ as wt}from"./index-Dp337umc.js";import{u as Oe,a as Tt,T as Vt}from"./index--B-lkCBK.js";const[At,G]=ie("cell"),De={tag:J("div"),icon:String,size:String,title:X,value:X,label:X,center:Boolean,isLink:Boolean,border:Ie,iconPrefix:String,valueClass:de,labelClass:de,titleClass:de,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Et=ce({},De,Je);var Lt=Q({name:At,props:Et,setup(e,{slots:n}){const a=Ze(),g=()=>{if(n.label||F(e.label))return i("div",{class:[G("label"),e.labelClass]},[n.label?n.label():e.label])},o=()=>{var l;if(n.title||F(e.title)){const m=(l=n.title)==null?void 0:l.call(n);return Array.isArray(m)&&m.length===0?void 0:i("div",{class:[G("title"),e.titleClass],style:e.titleStyle},[m||i("span",null,[e.title]),g()])}},d=()=>{const l=n.value||n.default;if(l||F(e.value))return i("div",{class:[G("value"),e.valueClass]},[l?l():i("span",null,[e.value])])},S=()=>{if(n.icon)return n.icon();if(e.icon)return i(ae,{name:e.icon,class:G("left-icon"),classPrefix:e.iconPrefix},null)},y=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const l=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return i(ae,{name:l,class:G("right-icon")},null)}};return()=>{var l;const{tag:m,size:r,center:T,border:V,isLink:M,required:N}=e,I=(l=e.clickable)!=null?l:M,A={center:T,required:!!N,clickable:I,borderless:!V};return r&&(A[r]=!!r),i(m,{class:G(A),role:I?"button":void 0,tabindex:I?0:void 0,onClick:a},{default:()=>{var $;return[S(),o(),d(),y(),($=n.extra)==null?void 0:$.call(n)]}})}}});const pe=re(Lt);function Ne(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Rt(e,n){if(Ne(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function Pt(e,n){return new Promise(a=>{const g=n.validator(e,n);if(Ge(g)){g.then(a);return}a(g)})}function Le(e,n){const{message:a}=n;return Qe(a)?a(e,n):a||""}function Bt({target:e}){e.composing=!0}function Re({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Mt(e,n){const a=le();e.style.height="auto";let g=e.scrollHeight;if(et(n)){const{maxHeight:o,minHeight:d}=n;o!==void 0&&(g=Math.min(g,o)),d!==void 0&&(g=Math.max(g,d))}g&&(e.style.height=`${g}px`,ye(a))}function $t(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function W(e){return[...e].length}function ve(e,n){return[...e].slice(0,n).join("")}const[Ot,B]=ie("field"),Se={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:X,formatter:Function,clearIcon:J("clear"),modelValue:tt(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:J("focus"),formatTrigger:J("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Dt=ce({},De,Se,{rows:X,type:J("text"),rules:Array,autosize:[Boolean,Object],labelWidth:X,labelClass:de,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var pt=Q({name:Ot,props:Dt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const g=Oe(),o=Pe({status:"unvalidated",focused:!1,validateMessage:""}),d=q(),S=q(),y=q(),{parent:l}=Be(nt),m=()=>{var t;return String((t=e.modelValue)!=null?t:"")},r=t=>{if(F(e[t]))return e[t];if(l&&F(l.props[t]))return l.props[t]},T=j(()=>{const t=r("readonly");if(e.clearable&&!t){const s=m()!=="",u=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return s&&u}return!1}),V=j(()=>y.value&&a.input?y.value():e.modelValue),M=j(()=>{var t;const s=r("required");return s==="auto"?(t=e.rules)==null?void 0:t.some(u=>u.required):s}),N=t=>t.reduce((s,u)=>s.then(()=>{if(o.status==="failed")return;let{value:v}=V;if(u.formatter&&(v=u.formatter(v,u)),!Rt(v,u)){o.status="failed",o.validateMessage=Le(v,u);return}if(u.validator)return Ne(v)&&u.validateEmpty===!1?void 0:Pt(v,u).then(_=>{_&&typeof _=="string"?(o.status="failed",o.validateMessage=_):_===!1&&(o.status="failed",o.validateMessage=Le(v,u))})}),Promise.resolve()),I=()=>{o.status="unvalidated",o.validateMessage=""},A=()=>n("endValidate",{status:o.status,message:o.validateMessage}),$=(t=e.rules)=>new Promise(s=>{I(),t?(n("startValidate"),N(t).then(()=>{o.status==="failed"?(s({name:e.name,message:o.validateMessage}),A()):(o.status="passed",s(),A())})):s()}),z=t=>{if(l&&e.rules){const{validateTrigger:s}=l.props,u=Ve(s).includes(t),v=e.rules.filter(_=>_.trigger?Ve(_.trigger).includes(t):u);v.length&&$(v)}},H=t=>{var s;const{maxlength:u}=e;if(F(u)&&W(t)>+u){const v=m();if(v&&W(v)===+u)return v;const _=(s=d.value)==null?void 0:s.selectionEnd;if(o.focused&&_){const w=[...t],D=w.length-+u;return w.splice(_-D,D),w.join("")}return ve(t,+u)}return t},x=(t,s="onChange")=>{const u=t;t=H(t);const v=W(u)-W(t);if(e.type==="number"||e.type==="digit"){const w=e.type==="number";t=ot(t,w,w)}let _=0;if(e.formatter&&s===e.formatTrigger){const{formatter:w,maxlength:D}=e;if(t=w(t),F(D)&&W(t)>+D&&(t=ve(t,+D)),d.value&&o.focused){const{selectionEnd:se}=d.value,we=ve(u,se);_=W(w(we))-W(we)}}if(d.value&&d.value.value!==t)if(o.focused){let{selectionStart:w,selectionEnd:D}=d.value;if(d.value.value=t,F(w)&&F(D)){const se=W(t);v?(w-=v,D-=v):_&&(w+=_,D+=_),d.value.setSelectionRange(Math.min(w,se),Math.min(D,se))}}else d.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},c=t=>{t.target.composing||x(t.target.value)},L=()=>{var t;return(t=d.value)==null?void 0:t.blur()},E=()=>{var t;return(t=d.value)==null?void 0:t.focus()},f=()=>{const t=d.value;e.type==="textarea"&&e.autosize&&t&&Mt(t,e.autosize)},h=t=>{o.focused=!0,n("focus",t),ne(f),r("readonly")&&L()},b=t=>{o.focused=!1,x(m(),"onBlur"),n("blur",t),!r("readonly")&&(z("onBlur"),ne(f),ct())},C=t=>n("clickInput",t),k=t=>n("clickLeftIcon",t),R=t=>n("clickRightIcon",t),K=t=>{oe(t),n("update:modelValue",""),n("clear",t)},P=j(()=>{if(typeof e.error=="boolean")return e.error;if(l&&l.props.showError&&o.status==="failed")return!0}),O=j(()=>{const t=r("labelWidth"),s=r("labelAlign");if(t&&s!=="top")return{width:Te(t)}}),he=t=>{t.keyCode===13&&(!(l&&l.props.submitOnEnter)&&e.type!=="textarea"&&oe(t),e.type==="search"&&L()),n("keypress",t)},U=()=>e.id||`${g}-input`,qe=()=>o.status,We=()=>{const t=B("control",[r("inputAlign"),{error:P.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return i("div",{class:t,onClick:C},[a.input()]);const s={id:U(),ref:d,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:r("disabled"),readonly:r("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${g}-label`:void 0,onBlur:b,onFocus:h,onInput:c,onClick:C,onChange:Re,onKeypress:he,onCompositionend:Re,onCompositionstart:Bt};return e.type==="textarea"?i("textarea",s,null):i("input",$e($t(e.type),s),null)},je=()=>{const t=a["left-icon"];if(e.leftIcon||t)return i("div",{class:B("left-icon"),onClick:k},[t?t():i(ae,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},He=()=>{const t=a["right-icon"];if(e.rightIcon||t)return i("div",{class:B("right-icon"),onClick:R},[t?t():i(ae,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ke=()=>{if(e.showWordLimit&&e.maxlength){const t=W(m());return i("div",{class:B("word-limit")},[i("span",{class:B("word-num")},[t]),it("/"),e.maxlength])}},Ue=()=>{if(l&&l.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const s=a["error-message"],u=r("errorMessageAlign");return i("div",{class:B("error-message",u)},[s?s({message:t}):t])}},Ye=()=>{const t=r("labelWidth"),s=r("labelAlign"),u=r("colon")?":":"";if(a.label)return[a.label(),u];if(e.label)return i("label",{id:`${g}-label`,for:a.input?void 0:U(),onClick:v=>{oe(v),E()},style:s==="top"&&t?{width:Te(t)}:void 0},[e.label+u])},Xe=()=>[i("div",{class:B("body")},[We(),T.value&&i(ae,{ref:S,name:e.clearIcon,class:B("clear")},null),He(),a.button&&i("div",{class:B("button")},[a.button()])]),Ke(),Ue()];return ge({blur:L,focus:E,validate:$,formValue:V,resetValidation:I,getValidationStatus:qe}),at(lt,{customValue:y,resetValidation:I,validateWithTrigger:z}),ke(()=>e.modelValue,()=>{x(m()),I(),z("onChange"),ne(f)}),Me(()=>{x(m(),e.formatTrigger),ne(f)}),_e("touchstart",K,{target:j(()=>{var t;return(t=S.value)==null?void 0:t.$el})}),()=>{const t=r("disabled"),s=r("labelAlign"),u=je(),v=()=>{const _=Ye();return s==="top"?[u,_].filter(Boolean):_||[]};return i(pe,{size:e.size,class:B({error:P.value,disabled:t,[`label-${s}`]:s}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:O.value,valueClass:B("value"),titleClass:[B("label",[s,{required:M.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:u&&s!=="top"?()=>u:null,title:v,value:Xe,extra:a.extra})}}});const Nt=re(pt);function zt(){return Array(26).fill("").map((a,g)=>String.fromCharCode(65+g))}const[ze,be]=ie("index-bar"),Ft={sticky:Ie,zIndex:X,teleport:[String,Object],highlightColor:String,stickyOffsetTop:ft(0),indexList:{type:Array,default:zt}},Fe=Symbol(ze);var qt=Q({name:ze,props:Ft,emits:["select","change"],setup(e,{emit:n,slots:a}){const g=q(),o=q(),d=q(""),S=rt(),y=st(g),{children:l,linkChildren:m}=ut(Fe);let r;m({props:e});const T=j(()=>{if(F(e.zIndex))return{zIndex:+e.zIndex+1}}),V=j(()=>{if(e.highlightColor)return{color:e.highlightColor}}),M=(f,h)=>{for(let b=l.length-1;b>=0;b--){const C=b>0?h[b-1].height:0,k=e.sticky?C+e.stickyOffsetTop:0;if(f+k>=h[b].top)return b}return-1},N=f=>l.find(h=>String(h.index)===f),I=()=>{if(gt(g))return;const{sticky:f,indexList:h}=e,b=xe(y.value),C=Ce(y),k=l.map(K=>K.getRect(y.value,C));let R=-1;if(r){const K=N(r);if(K){const P=K.getRect(y.value,C);e.sticky&&e.stickyOffsetTop?R=M(P.top-e.stickyOffsetTop,k):R=M(P.top,k)}}else R=M(b,k);d.value=h[R],f&&l.forEach((K,P)=>{const{state:O,$el:he}=K;if(P===R||P===R-1){const U=he.getBoundingClientRect();O.left=U.left,O.width=U.width}else O.left=null,O.width=null;if(P===R)O.active=!0,O.top=Math.max(e.stickyOffsetTop,k[P].top-b)+C.top;else if(P===R-1&&r===""){const U=k[R].top-b;O.active=U>0,O.top=U+C.top-k[P].height}else O.active=!1}),r=""},A=()=>{ne(I)};_e("scroll",I,{target:y,passive:!0}),Me(A),ke(()=>e.indexList,A),ke(d,f=>{f&&n("change",f)});const $=()=>e.indexList.map(f=>{const h=f===d.value;return i("span",{class:be("index",{active:h}),style:h?V.value:void 0,"data-index":f},[f])}),z=f=>{r=String(f);const h=N(r);if(h){const b=xe(y.value),C=Ce(y),{offsetHeight:k}=document.documentElement;if(h.$el.scrollIntoView(),b===k-C.height){I();return}e.sticky&&e.stickyOffsetTop&&(le()===k-C.height?ye(le()):ye(le()-e.stickyOffsetTop)),n("select",h.index)}},H=f=>{const{index:h}=f.dataset;h&&z(h)},x=f=>{H(f.target)};let c;const L=f=>{if(S.move(f),S.isVertical()){oe(f);const{clientX:h,clientY:b}=f.touches[0],C=document.elementFromPoint(h,b);if(C){const{index:k}=C.dataset;k&&c!==k&&(c=k,H(C))}}},E=()=>i("div",{ref:o,class:be("sidebar"),style:T.value,onClick:x,onTouchstartPassive:S.start},[$()]);return ge({scrollTo:z}),_e("touchmove",L,{target:o}),()=>{var f;return i("div",{ref:g,class:be()},[e.teleport?i(dt,{to:e.teleport},{default:()=>[E()]}):E(),(f=a.default)==null?void 0:f.call(a)])}}});const[Wt,jt]=ie("index-anchor"),Ht={index:X};var Kt=Q({name:Wt,props:Ht,setup(e,{slots:n}){const a=Pe({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),g=q(),{parent:o}=Be(Fe);if(!o)return;const d=()=>a.active&&o.props.sticky,S=j(()=>{const{zIndex:l,highlightColor:m}=o.props;if(d())return ce(ht(l),{left:a.left?`${a.left}px`:void 0,width:a.width?`${a.width}px`:void 0,transform:a.top?`translate3d(0, ${a.top}px, 0)`:void 0,color:m})});return ge({state:a,getRect:(l,m)=>{const r=Ce(g);return a.rect.height=r.height,l===window||l===document.body?a.rect.top=r.top+le():a.rect.top=r.top+xe(l)-m.top,a.rect}}),()=>{const l=d();return i("div",{ref:g,style:{height:l?`${a.rect.height}px`:void 0}},[i("div",{style:S.value,class:[jt({sticky:l}),{[mt]:l}]},[n.default?n.default():e.index])])}}});const Ut=re(Kt),Yt=re(qt),[Xt,te,Jt]=ie("search"),Zt=ce({},Se,{label:String,shape:J("square"),leftIcon:J("search"),clearable:Ie,actionText:String,background:String,showAction:Boolean});var Gt=Q({name:Xt,props:Zt,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:g}){const o=Oe(),d=q(),S=()=>{a.action||(n("update:modelValue",""),n("cancel"))},y=c=>{c.keyCode===13&&(oe(c),n("search",e.modelValue))},l=()=>e.id||`${o}-input`,m=()=>{if(a.label||e.label)return i("label",{class:te("label"),for:l()},[a.label?a.label():e.label])},r=()=>{if(e.showAction){const c=e.actionText||Jt("cancel");return i("div",{class:te("action"),role:"button",tabindex:0,onClick:S},[a.action?a.action():c])}},T=()=>{var c;return(c=d.value)==null?void 0:c.blur()},V=()=>{var c;return(c=d.value)==null?void 0:c.focus()},M=c=>n("blur",c),N=c=>n("focus",c),I=c=>n("clear",c),A=c=>n("clickInput",c),$=c=>n("clickLeftIcon",c),z=c=>n("clickRightIcon",c),H=Object.keys(Se),x=()=>{const c=ce({},g,Ae(e,H),{id:l()}),L=E=>n("update:modelValue",E);return i(Nt,$e({ref:d,type:"search",class:te("field",{"with-message":c.errorMessage}),border:!1,onBlur:M,onFocus:N,onClear:I,onKeypress:y,onClickInput:A,onClickLeftIcon:$,onClickRightIcon:z,"onUpdate:modelValue":L},c),Ae(a,["left-icon","right-icon"]))};return ge({focus:V,blur:T}),()=>{var c;return i("div",{class:te({"show-action":e.showAction}),style:{background:e.background}},[(c=a.left)==null?void 0:c.call(a),i("div",{class:te("content",e.shape)},[m(),x()]),r()])}}});const Qt=re(Gt),en=e=>(It("data-v-59fd3941"),e=e(),St(),e),tn={class:"city"},nn={class:"top"},an={class:"content"},ln=en(()=>fe("div",{class:"text"},"热门",-1)),on={class:"hotlist"},cn=["onClick"],rn=Q({__name:"city",setup(e){const n=vt();n.fetchAllCitiesData();const{allCity:a}=bt(n),g=yt(),o=q(""),d=q(0),S=T=>m(),y=()=>l(),l=()=>{g.back()},m=T=>{},r=T=>{n.currentCity=T,g.back()};return(T,V)=>{const M=Qt,N=Vt,I=Tt,A=Ut,$=pe,z=Yt,H=kt("tempalte");return p(),Y("div",tn,[fe("div",nn,[i(M,{modelValue:o.value,"onUpdate:modelValue":V[0]||(V[0]=x=>o.value=x),shape:"round",background:"#ff9854",placeholder:"城市/区域/位置","show-action":"",onSearch:S,onCancel:y},null,8,["modelValue"]),i(I,{active:d.value,"onUpdate:active":V[1]||(V[1]=x=>d.value=x),sticky:""},{default:ue(()=>[(p(!0),Y(Z,null,ee(Ee(a),(x,c,L)=>(p(),me(N,{key:L,title:x.title,name:c},null,8,["title","name"]))),128))]),_:1},8,["active"])]),(p(!0),Y(Z,null,ee(Ee(a),(x,c,L)=>(p(),me(H,{key:L},{default:ue(()=>[_t(fe("div",an,[i(z,{"index-list":T.indexList},{default:ue(()=>[i(A,{index:"热门"},{default:ue(()=>[ln,fe("div",on,[(p(!0),Y(Z,null,ee(x.hotCities,(E,f,h)=>(p(),Y("div",{key:h,class:"city",onClick:b=>r(E)},xt(E.cityName),9,cn))),128))])]),_:2},1024),(p(!0),Y(Z,null,ee(x.cities,(E,f,h)=>(p(),Y(Z,{key:h},[i(A,{index:E.group},null,8,["index"]),(p(!0),Y(Z,null,ee(E.cities,(b,C,k)=>(p(),me($,{title:b.cityName,onClick:R=>r(b)},null,8,["title","onClick"]))),256))],64))),128))]),_:2},1032,["index-list"])],512),[[Ct,d.value==c]])]),_:2},1024))),128))])}}}),dn=wt(rn,[["__scopeId","data-v-59fd3941"]]);export{dn as default};
